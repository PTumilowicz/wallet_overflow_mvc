{% extends 'base.twig' %}

{% block title %}Expense{% endblock %}

{% block body %}  

    <div class="content">
        <div class="main_content">
            <div class="main_content_column">
                <h3>Add your expense</h3>
                {# <?php
                    if (isset($_SESSION['s_expense'])) echo '<div class="success">'.$_SESSION['s_expense'].'</div>';
                    unset($_SESSION['s_expense']);
                ?> #}
                <form class="main_form" action="expense_script.php" method="POST">
                    <label for="amount">Expense amount:</label>
                    <input type="number" name="amount" min="0" step="0.01" required>
                    <label for="date">Expense date:</label>
                    <input type="date" name="date" min='2000-01-01' value="<?= date('Y-m-d'); ?>" required>
                    <label for="category">Expense category:</label>
                    <select name="category" required>
                        <option value="">--- Choose category ---</option>
                            {% for expense_category in expense_categories %}
                                <option>{{ expense_category.name }}</option>
                            {% endfor %}
                    </select>
                    <label for="payment_method">Payment method:</label>
                    <select name="payment_method" required>
                        <option value="">--- Choose payment method ---</option>
                            {% for payment_method in payment_methods %}
                                <option>{{ payment_method.name }}</option>
                            {% endfor %}
                    </select>
                    <label for="comment">Your comment (optional):</label>
                    <textarea rows="5" name="comment" placeholder="Enter your comment here" maxlength="100"></textarea>
                    {# <?php
                        if (isset($_SESSION['e_expense_comment'])) echo '<div class="error">'.$_SESSION['e_expense_comment'].'</div>';
                        unset($_SESSION['e_expense_comment']);
                    ?> #}
                    <button>Add expense</button>
                </form>
            </div>
            <div class="main_content_column">
                <div>
                    <h3>Add your category</h3>
                    <form class="main_form" action="expense_script.php" method="POST">
                        <label for="new_expense_category">Enter new expense category:</label>
                        <input type="text" name="new_expense_category" required>
                        {# <?php
                            if (isset($_SESSION['e_new_expense_category'])) echo '<div class="error">'.$_SESSION['e_new_expense_category'].'</div>';
                            unset($_SESSION['e_new_expense_category']);
                            if (isset($_SESSION['s_new_expense_category'])) echo '<div class="success">'.$_SESSION['s_new_expense_category'].'</div>';
                            unset($_SESSION['s_new_expense_category']);
                        ?> #}
                        <button>Add expense category</button>
                    </form>
                </div>
                <div>
                    <h3>Add your payment method</h3>
                    <form class="main_form" action="expense_script.php" method="POST">
                        <label for="new_payment_method">Enter new payment method:</label>
                        <input type="text" name="new_payment_method" required>
                        {# <?php
                            if (isset($_SESSION['e_new_payment_method'])) echo '<div class="error">'.$_SESSION['e_new_payment_method'].'</div>';
                            unset($_SESSION['e_new_payment_method']);
                            if (isset($_SESSION['s_new_payment_method'])) echo '<div class="success">'.$_SESSION['s_new_payment_method'].'</div>';
                            unset($_SESSION['s_new_payment_method']);
                        ?> #}
                        <button>Add payment method</button>
                    </form>
                </div>
            </div> 
        </div>
    </div>
</main>

{% endblock %}